# 在线外卖订餐系统

## 项目概述

这是一个基于JavaWeb的在线外卖订餐系统，主要功能包括用户登录、查看菜品、下单点餐、查看订单等。系统采用JSP+Servlet+JDBC的技术架构，实现了MVC设计模式。

## 系统架构

### 目录结构
- `src/`: Java源代码
  - `controller/`: 控制器层，负责处理用户请求
  - `service/`: 业务逻辑层，负责业务规则和逻辑处理
  - `dao/`: 数据访问层，负责与数据库交互
  - `model/`: 模型类，用于封装数据
  - `util/`: 工具类，包含数据库连接等通用功能
- `web/`: Web资源文件
  - `*.jsp`: JSP页面
  - `css/`: 样式表
  - `js/`: JavaScript文件
- `lib/`: 项目依赖的库文件

### 数据库设计
系统使用MySQL数据库，主要包含以下表：
- `user`: 用户表，存储用户信息
- `food`: 菜品表，存储菜品信息
- `order`: 订单表，存储订单信息
- `orderDetail`: 订单详情表，存储订单中的菜品信息

## 主要功能

### 1. 用户登录
- 用户通过学号和密码登录系统
- 登录时需要选择所在学院和系
- 登录时需要输入验证码（已启用验证码校验）
- 用户可点击验证码图片刷新获取新的验证码

### 2. 菜品浏览
- 用户可以浏览所有在售菜品
- 菜品按类别分类显示

### 3. 订单管理
- 用户可以查看自己的历史订单
- 订单状态包括处理中、已完成和已取消

### 4. 下单点餐
- 用户可以将菜品加入购物车
- 用户可以提交订单

## 用户指南

### 登录系统
1. 在登录页面输入学号和密码（如：学号2025001，密码123a）
2. 选择所在学院和系
3. 输入验证码（区分大小写）
4. 如果看不清验证码，可以点击验证码图片刷新
5. 点击登录按钮

### 查看订单
1. 登录成功后自动跳转到订单页面
2. 在订单页面可以查看历史订单

## 常见问题解决

### 登录失败问题
如果登录失败，可能是以下原因：
1. 学号或密码错误，请确认输入信息正确
2. 验证码输入错误，请重新输入或点击验证码图片刷新后重试
3. 数据库连接异常，请联系管理员

## 最近修复的问题

1. **登录失败问题**：修复了输入正确学号和密码无法登录的问题
   - 解决方案：优化了数据库连接参数，增加了中文编码支持
   - 改进了用户验证逻辑，解决了密码验证失败的问题
   - 添加了详细的日志输出，便于问题定位

2. **验证码功能启用**：启用了验证码校验功能
   - 解决方案：启用了LoginService中的验证码校验逻辑
   - 优化了验证码的生成和校验过程
   - 增强了错误信息提示，便于用户理解错误原因
   - 改进了验证码刷新功能，确保每次获取新的验证码

## 系统要求

- JDK 8或更高版本
- Tomcat 8或更高版本（推荐使用Tomcat 10）
- MySQL 5.7或更高版本

## 部署指南

1. 创建数据库并导入`create_database.sql`脚本
2. 配置`src/util/DBUtil.java`中的数据库连接参数
3. 将项目部署到Tomcat服务器
4. 通过浏览器访问系统 